<h1>Submit a New Receipt</h1>

<form (ngSubmit)="onSubmit()" #receiptForm="ngForm">
  <div style="margin-bottom: 12px;">
    <label>Date:</label><br />
    <input type="date" [(ngModel)]="purchaseDate" name="purchaseDate" required />
  </div>

  <div style="margin-bottom: 12px;">
    <label>Amount:</label><br />
    <input type="number" [(ngModel)]="amount" name="amount" required min="0" />
  </div>

  <div style="margin-bottom: 12px;">
    <label>Description:</label><br />
    <input type="text" [(ngModel)]="description" name="description" required />
  </div>

  <div style="margin-bottom: 12px;">
    <label>Receipt File:</label><br />
    <input type="file" (change)="onFileSelected($event)" />
  </div>

  <button type="submit">Submit</button>
</form>

<hr />

<h2>Submitted Receipts</h2>

<table *ngIf="receipts.length > 0; else noReceipts" border="1" cellpadding="10" cellspacing="0">
  <thead>
    <tr>
      <th>ID</th>
      <th>Date</th>
      <th>Amount</th>
      <th>Description</th>
      <th>Receipt File</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of receipts">
      <td>{{ r.id }}</td>
      <td>{{ r.purchaseDate | date: 'shortDate' }}</td>
      <td>${{ r.amount }}</td>
      <td>{{ r.description }}</td>
      <td>
        <a *ngIf="r.receiptFilePath" [href]="'https://localhost:5001/' + r.receiptFilePath" target="_blank">
          View
        </a>
        <span *ngIf="!r.receiptFilePath">â€”</span>
      </td>
    </tr>
  </tbody>
</table>

<ng-template #noReceipts>
  <p>No receipts submitted yet.</p>
</ng-template>